# Passing Server Data

Coming soon...

If you look in rep log creator, as we know the actual items that end up inside of our dropdown are actually hard coded, but there's a specific set of valid options in our server is actually what knows these options. Can we prove this by? Because when we added this last inbound item option, when we try to send that to the server, the server hits us with a validation error message. So the question is should we instead, instead of hard coding these options, should we load them from the server? And the answer is maybe honestly just a tiny bit of hard coding here to master your server is not that big of a deal. So in real life I might just feel comfortable keeping this unless I know that these values are going to change with some frequency, so don't worry about having some hard coded stuff in your javascript are. The advantage of that is simplicity, but if we did want to load this from the server, I want to show you two ways to do that. The first way is going to be to move the item options to state in rep log APP, 

so quite literally, let's copy our item options here with our rep log creator that I'm rep log APP. On Top, I will initialize a new item options state, 

sat to that set to that ray 

because this estate, this is automatically passed down as a prop to rep logs so we can meet. They're going to rep logs and add item options as a prop type that array that is required and then the structure that along with the many other options item options, and then we'll pass that down into our rep log, the Creator as item options equals item options. Then I'll copy the prop type because we'll need to do the same thing in rep blog creator at the bottom, defined that pop type. Go to the top of my runner function, will restructure this out of our props item options, and then that's it. Then below we just need to do our map function on the local variable. Just like that. Look, a little bit of luck. We now have our items stored as state trains weekend. You change them, it shows up. Cool, so that small step makes us very powerful because the two ways to load this data from the server initially, the first way to do it is to do it the same way that we let our rep logs, which means changes to an empty array and then inside component that amount just make an Ajax call. For those items, we would need to create an Api upon Api end point that returns those, but that would work just fine. The second option 

is to not is to actually dump the dump the item options immediately inside of our html as a javascript variable and then read that from our react app. The advantage to this is that you can see your application with some server, some data from your server, and that data is available instantly without needing to make any Ajax call. So check this out. I'm going to copy of my options again and I'm actually going to go up into my entry point rep log. React. This is not going to be the final resting place for these options, but for now I'm just going to create a new item options variable there and paste them in. What I'm doing here is moving them out of my react application. Then I'm going to pass them in as a new prop item. Options equals item options. Thanks to this, our rep log app is now going to receive this new item options prop, so different options prop. I'm going to remove the state entirely and notice originally I said it as state because it was going to need to change the Ajax even though it wasn't gonna change after it's still technically state. That's a note for earlier down at the bottom and prop types will set item options to prop types that array and you could make that required. I'll talk about that in a second. 

So we deleted the item options state and added an item options prop. And the cool thing is since we're passing all of our prop in all of our state, the rest of the application doesn't care about this. It just works the same prop as being passed down to our children components, so this is pretty cool. Now, by the way, I sometimes I deleted the state, but if our item options really did need to be state, we could still use this strategy and we could use this item options prop as the initial value of our state so that here's what it looks like is you still do have an item options state up here and it's set to this dot props dot item options, so that's just used to populate the initial state and if you do have a state and a proper the same name, that's fine. You'll notice down and render the way that restructuring we're doing our proper spread is that any. If you do have duplicate state of our prop, the state will override the prep because it comes after. So it was small item. Now I noticed that below I made the item options as an array, but I didn't make it required in a real application. I wouldn't make it required, but if you knew that you were using this component and sometimes the item options, we might not be passed in, well that's a problem 

because that means that our code would fail. We'll be undefined in that code fail and this was passed down as a prop, so if you do want it to be optional, but you want to give the default value, you can actually do that with rep log app. That default props equals, and here you can see item options, Oscar Bragan racket, so if you do really ever have truly optional props, it's a good idea to give them a default value. Now let's talk, but we need to finish this because I still have my item options. Hardcoded in Rep log react, and that means they're still not being loaded from the server. So we're going to go one step further here. I'm going to copy these item options once again. Then I'm going to go into the template that renders this page, which is 

templates, 

lift index, dot html dot twig. Down at the bottom you can see where my script tags are loaded before those on make a new script tag. 

Yeah, 

and create a new variable window, new global variables, so I'll set it on window window. That rep log APP prompts equals 

yeah, 

it inside there. I'll add an item options key set to our item options. There's. Notice I'm using uppercase letters there. No, there's no reason for that. That's just kind of a naming in this case. Thanks to this, we can go into rep log, react to lead the old constant. 

Okay. 

Down below we can say window. That rep log APP prompts that item. Options in that will work. Now, one question you might have is why didn't we just basically copy this code and use it down in rep log creator instead of passing all the props down all the levels. That's a bit of a best practice. I want all of my react components to not use any global window objects. The only place I want you to feel safe using global window objects is inside of your entry point. It should grab all of the things from the global window object and pass them down into your react components. Now notice that's the way we've written it right now. We could in theory actually add other things in here. Like for example, we could say what if maybe we want to. We want to be able to control any of the props that are being passed into our components. So in Rep log react, we do have with heart thing, so of course we could do window that rep log APP stop heart above their butts. We can do something cooler, we can take advantage of our object destructuring and just say dot.dot window. That rep log APP props. Suddenly all the keys on that will be passed in as props. 

And the cool thing is if we set, this should show hard to false. This is pretty interesting because we're now passing a prep call with heart equals false. But then thanks to this prop here, we're also, we're passing it again as true. The way that prompts work is the one that comes later always wins. So we do see our heart. So this is a cool way of rendering a component with your default prompts that you want to pass in, but then you can actually grab them from somewhere else and they might override it. All right. Finally, now that we have our item options inside of our template, we can make them truly dynamic from the server. 

Yeah, 

if you look at our form, so source form type rep, log type, you can see the choices come from a another method called rep log. Get things you can live choices. So I've already created a central method that holds, uh, those items in some way. So I'm actually going to copy this and let's go into the controller that renders this page, which is source controller, lift controller. It's the index action here. Let's do this. Let's say, let's dump that to see what it looks like. 

And we'll say die. 

So if you move over and refresh. Ah, interesting. So there's two things going on here. First of all, the value that we want. If you look, look at this and compare it to the structure that we want. We want an ID set, the cat or fat cat, you can see the value over here and then we need a text key. My application is actually using the transit or component, so what we have over here is actually the text, but we need to run it through the translator. These details aren't important to. The big picture is in my application. I do have the choices and now I need to transform them into the format that is needed by my react application. To do that, go back into the controller. I'm actually going to paste in some code here. This code uses the translator, so actually to get the translator, I'm gonna. Go Up and add a translator interface type and translator. I have a couple of other unused arguments, but that's okay and you can see this actually is aiming to create the same structure that we have down here with our props. We have an item options key. We loop over them. We said the idea of the text and we send them to the translator, so now when we refresh, 

the dumped code does look like we need it to. Now we are in business, in fact, we can even take our with heart key here. Now let's add with heart truth because we liked the heart with 

heart 

equals true. I'll get rid of my statements and we'll pass them the new variable 

called 

Rep log. App. Props set to that same rep log app prompts property, so now that we have, as in the perfect format, 

we can go back into a template and say window dot rep log app prompts equals curly curly rep log app prompts, pipe Jason encode pipe raw. That will literally print it out as a jason structure that can be read by Java script. This is a great way to pass in dynamic values into your applications and those dynamic values can even be used at, can just be red or they can be used as the initial state and it works perfectly. So guys, our APP, it's basically working there. I think it's time that we actually delete our old code and put this into the correct spot. The celebrate. So first I'm gonna. Delete this entire old components directory. That was all code used by the old APP that I'm going to delete the old entry point for epilogue that js and instead of index dot html dot twig, we can remove a bunch of old markup. This is all old stuff all the way down here. And now I'll put the list up right into the same app as a leader board. Uh, we can also delete the other templates underscore form, dot html dot twig, which was just used by that markup. And at the bottom here we can remove the old script tag. Wow. 

And in our webpack file, I'm going to remove the old entry. So after all of that, webpack is going to be angry because it's missing that entry file. So I'll restart webpack. 

Yeah, perfect. It builds, go back, refresh and it's alive. It works perfectly, except there's one small little weird thing which is that the leaderboard jumps over there before this is loaded. And actually there's a related weird thing about that and that is that if you look inside of our rep logs component. So this is our main, our main presentation on component that gives us all the markup. It has a call md seven on it. Now it's not wrong to put a bootstrap layout classes instead of react, but it is a little bit weird that even if we use this in different places on our site, it would always start with this call mb seven. It makes us a little bit more portable. We can actually remove that and instead in index dot html dot twig, we'll add the class there, will say, look, let's put the columns markup inside of here. You can see the column b seven and a call md five, and then our react to apple does fit inside of that. There's also fixes our problem of it jumping around. Sweet.